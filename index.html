<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Curated crypto research reports from top-tier institutional and on-chain analytics sources">
  <title>Crypto Reports Hub | Research Aggregator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <!-- High-Res Galactic Background with Canvas Starfield -->
  <div class="galactic-bg-layer" id="galacticBg">
    <canvas id="starfield" class="starfield-canvas"></canvas>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="container header-content">
      <div class="logo">
        <svg class="logo-icon-svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="url(#logo-grad)"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
          <defs>
            <linearGradient id="logo-grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#a855f7" />
              <stop offset="100%" stop-color="#3b82f6" />
            </linearGradient>
          </defs>
          <polygon points="12 2 2 7 12 12 22 7 12 2" />
          <polyline points="2 17 12 22 22 17" />
          <polyline points="2 12 12 17 22 12" />
        </svg>
        <span class="logo-text">Crypto Reports Hub</span>
      </div>
      <div class="header-actions">
        <span class="last-updated" id="lastUpdated">Last updated: --</span>
        <span class="sheet-status" id="sheetStatus"></span>
        <button class="btn btn-secondary" id="exportBtn" title="Download as CSV">â¬‡ï¸ Export</button>
        <button class="btn btn-secondary" id="addReportBtn" title="Add Report">ğŸ”’ Upload</button>
        <button class="btn btn-primary" id="refreshBtn">
          <span id="refreshIcon">ğŸ”„</span> Refresh
        </button>
      </div>
    </div>
  </header>

  <!-- Filter Bar -->
  <section class="filter-bar">
    <div class="container">
      <!-- Category Chips -->
      <div class="category-bar" id="categoryBar">
        <!-- Populated by app.js from APP_CONFIG.CATEGORIES -->
      </div>

      <!-- View + Search Row -->
      <div class="filter-row">
        <div class="view-toggle">
          <button class="view-btn active" data-view="cards" title="Card View">ğŸ´ Cards</button>
          <button class="view-btn" data-view="table" title="Table View">ğŸ“‹ Table</button>
        </div>
        <div class="search-wrapper">
          <span class="search-icon">ğŸ”</span>
          <input type="text" class="search-input" id="searchInput" placeholder="Search reports, sources, topics...">
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <main class="main">
    <div class="container">
      <!-- Stats Bar -->
      <div class="stats-bar" id="statsBar">
        <div class="stat-item">
          <span class="stat-value" id="totalReports">0</span>
          <span class="stat-label">Reports</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="sourceCount">0</span>
          <span class="stat-label">Sources</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="newCount">0</span>
          <span class="stat-label">New this week</span>
        </div>
      </div>

      <!-- Reports Grid / Table -->
      <div class="reports-grid" id="reportsGrid">
        <div class="loading">
          <div class="spinner"></div>
          <p class="loading-text">Loading reports...</p>
        </div>
      </div>
    </div>
  </main>

  <!-- AI Chat Panel -->
  <div class="chat-panel" id="chatPanel">
    <div class="chat-header">
      <div class="chat-title-group">
        <h3>âœ¨ Ask AI</h3>
        <span class="chat-report-title" id="chatReportTitle"></span>
      </div>
      <button class="chat-close" id="closeChatBtn">âœ•</button>
    </div>
    <div class="chat-messages" id="chatMessages">
      <div class="chat-message assistant">
        Hi! I'm your AI Research Assistant. Ask me anything about this report, or click a quick prompt below:
        <div class="chat-suggestions">
          <button class="chat-suggestion">Summarize the key takeaways</button>
          <button class="chat-suggestion">What is the outlook or conclusion?</button>
        </div>
      </div>
    </div>
    <div class="chat-input-area">
      <form id="chatForm">
        <input type="text" id="chatInput" placeholder="Ask a question..." autocomplete="off">
        <button type="submit" id="chatSubmitBtn" class="btn btn-primary">Send</button>
      </form>
      <div class="chat-footer-text">Powered by OpenAI GPT-4o-mini</div>
    </div>
  </div>

  <!-- Scripts (config must be first) -->
  <script src="js/config.js"></script>
  <script src="js/reports.js"></script>
  <script src="js/sheets.js"></script>
  <script src="js/export.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/add-report.js"></script>
  <script src="js/chat.js"></script>
  <script src="js/shortcuts.js"></script>
  <script src="js/effects.js"></script>
  <script src="js/app.js"></script>
</body>

</html>